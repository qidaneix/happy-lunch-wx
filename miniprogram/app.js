"use strict";
App({
    globalData: {},
    onLaunch: function () {
        var _this = this;
        var setUUID = function () {
            var uuid = Math.random().toString().slice(2, 15);
            _this.globalData.uuid = uuid;
            wx.setStorageSync("uuid", {
                uuid: uuid,
                time: Date.now(),
            });
        };
        var _a = wx.getStorageSync("uuid"), time = _a.time, uuid = _a.uuid;
        if (!time || !uuid || Date.now() - time > 1000 * 4 * 60 * 60) {
            setUUID();
        }
        else {
            this.globalData.uuid = uuid;
        }
        wx.getSetting({
            success: function (res) {
                if (res.authSetting["scope.userInfo"]) {
                    wx.getUserInfo({
                        success: function (res) {
                            _this.globalData.userInfo = res.userInfo;
                            if (_this.userInfoReadyCallback) {
                                _this.userInfoReadyCallback(res);
                            }
                        },
                    });
                }
            },
        });
    },
    onShow: function () {
        var time = wx.getStorageSync("uuid").time;
        console.log("uuid", wx.getStorageSync("uuid"));
        console.log("timeout", Date.now() - time, Date.now() - time > 1000 * 4 * 60 * 60);
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxHQUFHLENBQWE7SUFDZCxVQUFVLEVBQUUsRUFBRTtJQUNkLFFBQVE7UUFBUixpQkFxQ0M7UUFwQ0MsSUFBTSxPQUFPLEdBQUc7WUFDZCxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNuRCxLQUFJLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7WUFDNUIsRUFBRSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3hCLElBQUksTUFBQTtnQkFDSixJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUNqQixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUM7UUFFSSxJQUFBLDhCQUEwQyxFQUF4QyxjQUFJLEVBQUUsY0FBa0MsQ0FBQztRQUNqRCxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1lBRTVELE9BQU8sRUFBRSxDQUFDO1NBQ1g7YUFBTTtZQUNMLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUM3QjtRQUdELEVBQUUsQ0FBQyxVQUFVLENBQUM7WUFDWixPQUFPLEVBQUUsVUFBQyxHQUFHO2dCQUNYLElBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO29CQUVyQyxFQUFFLENBQUMsV0FBVyxDQUFDO3dCQUNiLE9BQU8sRUFBRSxVQUFDLEdBQUc7NEJBRVgsS0FBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQzs0QkFHeEMsSUFBSSxLQUFJLENBQUMscUJBQXFCLEVBQUU7Z0NBQzlCLEtBQUksQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQzs2QkFDakM7d0JBQ0gsQ0FBQztxQkFDRixDQUFDLENBQUM7aUJBQ0o7WUFDSCxDQUFDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELE1BQU07UUFDSSxJQUFBLHFDQUFJLENBQStCO1FBQzNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUMvQyxPQUFPLENBQUMsR0FBRyxDQUNULFNBQVMsRUFDVCxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUNqQixJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FDdkMsQ0FBQztJQUNKLENBQUM7Q0FDRixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAudHNcbkFwcDxJQXBwT3B0aW9uPih7XG4gIGdsb2JhbERhdGE6IHt9LFxuICBvbkxhdW5jaCgpIHtcbiAgICBjb25zdCBzZXRVVUlEID0gKCkgPT4ge1xuICAgICAgY29uc3QgdXVpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zbGljZSgyLCAxNSk7XG4gICAgICB0aGlzLmdsb2JhbERhdGEudXVpZCA9IHV1aWQ7XG4gICAgICB3eC5zZXRTdG9yYWdlU3luYyhcInV1aWRcIiwge1xuICAgICAgICB1dWlkLFxuICAgICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHsgdGltZSwgdXVpZCB9ID0gd3guZ2V0U3RvcmFnZVN5bmMoXCJ1dWlkXCIpO1xuICAgIGlmICghdGltZSB8fCAhdXVpZCB8fCBEYXRlLm5vdygpIC0gdGltZSA+IDEwMDAgKiA0ICogNjAgKiA2MCkge1xuICAgICAgLy8g5LiN5a2Y5Zyo5oiW6ICF6LaF6L+HNOWwj+aXtu+8jOmHjee9rlxuICAgICAgc2V0VVVJRCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdsb2JhbERhdGEudXVpZCA9IHV1aWQ7XG4gICAgfVxuXG4gICAgLy8g6I635Y+W55So5oi35L+h5oGvXG4gICAgd3guZ2V0U2V0dGluZyh7XG4gICAgICBzdWNjZXNzOiAocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMuYXV0aFNldHRpbmdbXCJzY29wZS51c2VySW5mb1wiXSkge1xuICAgICAgICAgIC8vIOW3sue7j+aOiOadg++8jOWPr+S7peebtOaOpeiwg+eUqCBnZXRVc2VySW5mbyDojrflj5blpLTlg4/mmLXnp7DvvIzkuI3kvJrlvLnmoYZcbiAgICAgICAgICB3eC5nZXRVc2VySW5mbyh7XG4gICAgICAgICAgICBzdWNjZXNzOiAocmVzKSA9PiB7XG4gICAgICAgICAgICAgIC8vIOWPr+S7peWwhiByZXMg5Y+R6YCB57uZ5ZCO5Y+w6Kej56CB5Ye6IHVuaW9uSWRcbiAgICAgICAgICAgICAgdGhpcy5nbG9iYWxEYXRhLnVzZXJJbmZvID0gcmVzLnVzZXJJbmZvO1xuICAgICAgICAgICAgICAvLyDnlLHkuo4gZ2V0VXNlckluZm8g5piv572R57uc6K+35rGC77yM5Y+v6IO95Lya5ZyoIFBhZ2Uub25Mb2FkIOS5i+WQjuaJjei/lOWbnlxuICAgICAgICAgICAgICAvLyDmiYDku6XmraTlpITliqDlhaUgY2FsbGJhY2sg5Lul6Ziy5q2i6L+Z56eN5oOF5Ya1XG4gICAgICAgICAgICAgIGlmICh0aGlzLnVzZXJJbmZvUmVhZHlDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlckluZm9SZWFkeUNhbGxiYWNrKHJlcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG4gIH0sXG4gIG9uU2hvdygpIHtcbiAgICBjb25zdCB7IHRpbWUgfSA9IHd4LmdldFN0b3JhZ2VTeW5jKFwidXVpZFwiKTtcbiAgICBjb25zb2xlLmxvZyhcInV1aWRcIiwgd3guZ2V0U3RvcmFnZVN5bmMoXCJ1dWlkXCIpKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwidGltZW91dFwiLFxuICAgICAgRGF0ZS5ub3coKSAtIHRpbWUsXG4gICAgICBEYXRlLm5vdygpIC0gdGltZSA+IDEwMDAgKiA0ICogNjAgKiA2MFxuICAgICk7XG4gIH0sXG59KTtcbiJdfQ==